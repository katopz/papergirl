<!doctype html>
<html>

<head>
  <meta charset="utf8" />
  <title>Simple papergirl example</title>
</head>

<body>
  <script src="../dist/papergirl.js"></script>
  <h3>Local Cached</h3>
  <pre id="local-cached" style="height:48px;overflow:auto;">Expect to be empty at first load. Do try refresh.</pre>
  <h3>Local</h3>
  <pre id="local" style="height:48px;overflow:auto;">Loading...</pre>
  <h3>Remote Cached</h3>
  <pre id="remote-cached" style="height:240px;overflow:auto;">Expect to be empty at first load. Do try refresh.</pre>
  <h3>Remote</h3>
  <pre id="remote" style="height:240px;overflow:auto;">Loading...</pre>
  <script>
    // For measure speed.
      var beg_local = new Date().valueOf();
      
      // Will get from cached first if has and then localhost after that.
      papergirl.getCacheFirst('foo.json', function(data) {
        // Cache is faster so this will call first.
        document.getElementById("local-cached").innerHTML = '// Time used : ' + (new Date().valueOf() - beg_local) + 'ms.<br>' + data;
      }, {
          // This part is optional, try uncomment for test it.
          // Intercept xhr request to modify headers before send.
          'beforeSend': function(xhr) { 
              xhr.setRequestHeader('foo', 'bar'); 
          },
          // Intercept xhr while onload
          'onload': function(xhr) {
              console.log(xhr);
          },
          // Never cache before from remote.
          'insert': function(xhr) {
              console.log('insert');
          },
          // Cached but not match from remote.
          'update': function(xhr) {
              console.log('update');
          },
          // Cache is dirty from remote.
          'dirty': function(xhr) {
              console.log('dirty');
          },
          // Cache is match with remote.
          'match': function(xhr) {
              console.log('match');
          },
          // Cache is match with remote by ETag.
          'not_mod': function(xhr) {
              console.log('not_mod');
          }
      }).then(function(data) {
        // And then we got update from local.
        document.getElementById("local").innerHTML = '// Time used : ' + (new Date().valueOf() - beg_local) + 'ms.<br>' + data;
      });
      
      // For measure speed from remote.
      var beg_remote = new Date().valueOf();
      
      // Will get from cached first if has and then remote host after that.
      papergirl.getCacheFirst('https://raw.githubusercontent.com/katopz/papergirl/master/package.json', function(data) {
        // Cache is faster so this will call first.
        document.getElementById("remote-cached").innerHTML = '// Time used : ' + (new Date().valueOf() - beg_remote) + 'ms.<br>' + data;
      }).then(function(data) {
        // And then we got update from remote.
        document.getElementById("remote").innerHTML = '// Time used : ' + (new Date().valueOf() - beg_remote) + 'ms.<br>' + data;
      });
  </script>
</body>

</html>